---
name: pr-compliance-review
description: PRの説明文・リンク先・添付画像・GitHub Issueを元に、実装が要件を満たしているかレビューするときに使用
allowed-tools: Read, Grep, Glob, Bash, WebFetch
---

# PR要件準拠レビュー基準

PRに記載された内容（説明文、リンク先、添付画像、GitHub Issue）を元に、実装が要件を正しく満たしているかレビューする。

## 情報収集手順

### 1. PR情報の取得
- `gh pr view <PR番号> --json title,body,url` でPRのタイトルと説明文を取得
- `gh pr diff <PR番号>` で差分を取得

### 2. GitHub Issueの取得（最重要）
- PR説明文から `#<数字>` や `https://github.com/.../issues/<数字>` 形式のIssue参照を抽出
- `gh issue view <Issue番号> --json title,body,comments` で各Issueの詳細を取得
- Issueのコメント欄も含めて要件を把握する

### 3. リンク先の取得
- PR説明文からURL（`https://...`）を抽出
- `WebFetch` で各リンク先の内容を取得し、要件や仕様の情報を把握する
- GitHub Issue以外のリンク（ドキュメント、デザイン、仕様書等）も確認する

### 4. 添付画像の確認
- PR説明文中の画像（`![...](...)` やHTMLの `<img>` タグ）を特定
- UIの期待される見た目やエラーのスクリーンショットなど、画像から読み取れる要件を把握する

## レビュー観点

### 要件の充足（Critical）
- Issueに記載された要件がすべて実装されているか
- PR説明文に記載された変更内容と実際の差分が一致しているか
- 未実装の要件がある場合、明確に指摘する

### 仕様との整合性（High）
- リンク先の仕様書やドキュメントに記載された仕様に準拠しているか
- 添付画像に示されたUIと実装が一致しているか
- Issueのコメント欄で議論された追加要件や変更が反映されているか

### 実装の過不足（Medium）
- PR説明文やIssueに記載されていない余分な変更が含まれていないか
- スコープ外の変更がないか
- 要件に対して過剰な実装（オーバーエンジニアリング）になっていないか

### Issueのクローズ条件（High）
- Issueに受け入れ条件（Acceptance Criteria）がある場合、すべて満たしているか
- Issueのチェックリストがある場合、すべて対応しているか
- Issueの再現手順がある場合（バグ修正）、その原因が正しく修正されているか

## 出力形式

各指摘について以下を記載:
- 問題の重要度（Critical/High/Medium/Low）
- 参照元（どのIssue/リンク/画像の要件に基づく指摘か）
- ファイルパスと行番号
- 問題の説明
- 改善提案
