# PR自動修正コマンド

PRのレビューコメントとCIエラーを自動修正する。

## 使用方法
```
/pr-fix [pr番号]
```
PR番号省略時は現在のブランチのPRを使用。

## 修正対象
### レビューコメント
内容を分析して対応要否を判断:
- 対応する: セキュリティ、バグ、型エラー、パフォーマンス
- スキップ: スタイルの好み、軽微な提案、質問

### CIエラー
- lint/type/test/build エラーを自動修正

## 手順
1. `gh pr view` でPR情報取得
2. `gh api pulls/:pr/comments` でレビューコメント取得
3. コンフリクト確認、あれば解消
4. `gh pr checks` でCIエラー確認
5. ユーザーに修正方針を確認（AskUserQuestion）
6. レビューコメント修正を適用
7. CIエラー修正を適用
8. コミット・プッシュ
9. ボットコメントに返信（人間のコメントには返信しない）
10. CLAUDE.md更新が必要か確認

## ユーザー確認（AskUserQuestion）

### 全体の修正方針
検出された修正項目について確認:
- **AIに判断を任せる（推奨）**: セキュリティ・バグ・型エラーは対応、軽微な提案はスキップ
- **個別に選択する**: 各項目について個別に確認

### 個別選択の場合
各項目について確認:
- **AIに判断を任せる**: この項目についてAIが対応要否を判断
- **修正する**: この項目を修正対象に追加
- **修正しない**: この項目をスキップ

### CLAUDE.md更新確認
修正後、プロジェクト全体に適用すべきルールがあれば確認:
- セキュリティパターン、コーディング規約、繰り返し発生するエラーパターン等

## 自動返信ルール
- 修正した: `Done.`
- 対応不要と判断: `Skipped: [理由]`
